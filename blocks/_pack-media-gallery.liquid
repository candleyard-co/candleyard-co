{% assign block_settings = block.settings %}

{%- if block_settings.zoom -%}
  <script
    src="{{ 'zoom-dialog.js' | asset_url }}"
    type="module"
  ></script>
{%- endif -%}

{%- liquid
  assign selected_product = closest.product
  assign selected_variant_media = selected_product.selected_or_first_available_variant.metafields.custom.pack_background_image.value
  assign selected_mobile_variant_media = selected_product.selected_or_first_available_variant.metafields.custom.pack_mobile_background_image.value

  assign first_3d_model = selected_product.media | where: 'media_type', 'model' | first

  if block_settings.hide_variants
    assign variant_images = selected_product.images | where: 'attached_to_variant?', true | map: 'src'
  endif

  if block_settings.slideshow_controls_style == 'thumbnails'
    assign controls_on_media = false
  else
    assign controls_on_media = true
  endif

  assign render_slideshow_controls = false

  if block_settings.media_presentation == 'carousel' or block_settings.slideshow_controls_style == block_settings.slideshow_mobile_controls_style
    assign render_slideshow_controls = true
  endif

  assign render_mobile_slideshow_controls = false

  if block_settings.slideshow_controls_style != block_settings.slideshow_mobile_controls_style
    assign slideshow_controls_class = 'mobile:hidden'

    if block_settings.slideshow_mobile_controls_style != 'hint'
      assign render_mobile_slideshow_controls = true
    endif
  endif

  assign slideshow_controls_style = block_settings.slideshow_controls_style
  # Use a counter instead of dots when there are many images to avoid cropping/overflow.
  if slideshow_controls_style == 'dots' and selected_product.media.size > 15
    assign slideshow_controls_style = 'counter'
  endif

  assign render_slideshow_arrows = false

  assign slideshow_class = 'product-media-gallery__slideshow--single-media slideshow--single-media'

  if slideshow_controls_style == 'thumbnails'
    assign pagination_position = block_settings.thumbnail_position
  else
    assign pagination_position = 'center'
  endif

  # correct discrepancy between position settings for thumbnails and other controls
  if pagination_position == 'bottom'
    assign pagination_position = 'center'
  endif

  assign icons_position = 'center'

  # Put the icons on the opposite side of the pagination controls
  if block_settings.slideshow_controls_position == 'on_media'
    if pagination_position == 'left'
      assign icons_position = 'right'
    elsif pagination_position == 'right'
      assign icons_position = 'left'
    endif
  endif
-%}

{%- liquid
  assign has_image_drop = selected_variant_media | has: 'media_type', 'image'
  # Determine if we're in single column mode (carousel or grid with one column)
  assign is_single_column = false
  assign is_single_column = true

  # Check if we need both sizes (for large first image in two-column grid)
  assign needs_both_sizes = false
  if block_settings.media_presentation == 'grid' and block_settings.media_columns == 'two' and block_settings.large_first_image
    assign needs_both_sizes = true
  endif

  # Calculate sizes using utility snippet
  if needs_both_sizes
    # Calculate sizes for single column (first image)
    capture sizes_single
      render 'util-product-media-sizes-attr', block: block, section: section, settings: settings, is_first_image: true, is_single_column: true, needs_both_sizes: true
    endcapture
    assign sizes_single = sizes_single | strip
  endif

  # Calculate sizes value for regular grid/carousel items
  capture sizes
    render 'util-product-media-sizes-attr', block: block, section: section, settings: settings, is_first_image: false, is_single_column: is_single_column, needs_both_sizes: needs_both_sizes
  endcapture
  assign sizes = sizes | strip
-%}
{%- if has_image_drop -%}
  <script
    src="{{ 'drag-zoom-wrapper.js' | asset_url }}"
    type="module"
  ></script>
{%- endif -%}

{% style %}
  {% unless block_settings.aspect_ratio == 'adapt' %}
    .product-media-container {
      --media-preview-ratio: {{ block_settings.aspect_ratio }};
    }

    {% if block_settings.constrain_to_viewport %}
      .product-media-container.constrain-height {
        background-color: var(--color-background);
      }

      .product-media-container.constrain-height:has(.product-media-constraint-wrapper) {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* Mobile constraint wrapper sizing - use width-based approach since max-height is disabled */
      .product-media-constraint-wrapper {
        width: 100%;
        max-width: 100%;
        flex-shrink: 0;
      }

      /* Desktop constraint wrapper sizing */
      @media screen and (min-width: 750px) {
        .product-media-constraint-wrapper {
          width: min(100%, calc(var(--constrained-height) * {{ block_settings.aspect_ratio }}));
        }
      }
    {% endif %}

    /* Constrain all deferred-media content to parent bounds when specific aspect ratio is set */
    .product-media-container:not(.dialog-zoomed-gallery *) .product-media deferred-media,
    .product-media-container:not(.dialog-zoomed-gallery *) .product-media product-model {
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    /* Ensure video and iframe elements respect container aspect ratio */
    .product-media-container:not(.dialog-zoomed-gallery *) .product-media deferred-media video,
    .product-media-container:not(.dialog-zoomed-gallery *) .product-media deferred-media iframe {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* 3D models need special handling since they don't support object-fit */
    .product-media-container:not(.dialog-zoomed-gallery *) .product-media product-model model-viewer {
      width: 100%;
      height: 100%;
    }

    /* Clear gallery aspect ratio for zoom dialog - let media display at natural aspect ratios */
    .dialog-zoomed-gallery .product-media {
      --gallery-aspect-ratio: var(--ratio);
    }
  {% endunless %}

  {% if block_settings.aspect_ratio == 'adapt' and block_settings.constrain_to_viewport %}
    .media-fit-{{ block_settings.media_fit }} {
      --product-media-fit: {{ block_settings.media_fit }};
    }

    /* Media fit for all media elements */
    .media-fit-{{ block_settings.media_fit }} :is(img, video, iframe, .deferred-media__poster-image) {
      object-fit: {{ block_settings.media_fit }};
      width: 100%;
      height: 100%;
    }

    /* 3D Models (no object-fit support, just sizing) */
    .media-fit-{{ block_settings.media_fit }} model-viewer {
      width: 100%;
      height: 100%;
    }
  {% endif %}

  {% unless block_settings.aspect_ratio == 'adapt' and block_settings.constrain_to_viewport %}
    .media-fit-cover {
      --product-media-fit: cover;
    }

    /* Media fit for all media elements - default to cover */
    .media-fit-cover :is(img, video, iframe, .deferred-media__poster-image) {
      object-fit: cover;
      width: 100%;
      height: 100%;
    }

    /* 3D Models (no object-fit support, just sizing) */
    .media-fit-cover model-viewer {
      width: 100%;
      height: 100%;
    }
  {% endunless %}

  /* Add background color so carousel arrows' mix-blend-mode works correctly even on transparent areas. */
  {% if block_settings.media_fit == 'contain' %}
    .media-fit-contain :is(img, .deferred-media__poster-image) {
      background-color: var(--color-background);
    }
  {% endif %}
{% endstyle %}

{% liquid
  assign product_media_container_class = 'product-media-container'
  if block_settings.constrain_to_viewport
    assign product_media_container_class = product_media_container_class | append: ' constrain-height'
  endif
  if block_settings.aspect_ratio != 'adapt'
    assign product_media_container_class = product_media_container_class | append: ' media-fit-cover'
  elsif block_settings.constrain_to_viewport
    assign product_media_container_class = product_media_container_class | append: ' media-fit-' | append: block_settings.media_fit
  else
    assign product_media_container_class = product_media_container_class | append: ' media-fit-contain'
  endif

  if block.settings.aspect_ratio == 'adapt'

    assign lowest_aspect_ratio = selected_variant_media.aspect_ratio
  endif
%}

<media-gallery
  class="
    spacing-style
    sticky-content
    {% if block_settings.media_presentation == 'grid' %}
      media-gallery--{{ block_settings.media_columns }}-column
      {% if block_settings.media_columns == "two" and block_settings.large_first_image%}media-gallery--large-first-image{% endif %}
    {% endif %}
    media-gallery--{{ block_settings.media_presentation }}
    {% if block_settings.slideshow_mobile_controls_style == 'hint' %}
      media-gallery--hint
    {% endif %}
    {% if block_settings.extend_media %}
      media-gallery--extend
    {% endif %}
  "
  style="{% render 'spacing-style', settings: block_settings %} --thumbnail-width: {{ block_settings.thumbnail_width }}px; --media-radius: {{ block_settings.media_radius }}px;{% if block_settings.icons_style contains 'large' %} --slideshow-icon-padding: 0px;{% endif %}--image-gap: {{ block_settings.image_gap }}px;{% unless block_settings.aspect_ratio == 'adapt' %} --gallery-aspect-ratio: {{ block_settings.aspect_ratio }};{% endunless %}"
  data-presentation="{{ block_settings.media_presentation }}"
  {{ block.shopify_attributes }}
>
  <div class="media-pack-gallery">
    {% capture slides %}
      {% capture children %}
        {% if selected_variant_media %}
          {%- liquid
              if needs_both_sizes
                assign media_sizes = sizes_single
              else
                assign media_sizes = sizes
              endif
          -%}
          {% if block_settings.aspect_ratio != 'adapt' and block_settings.constrain_to_viewport %}
            <div class="product-media-constraint-wrapper">
              {%- render 'pack-media', media: selected_variant_media, mobile_media: selected_mobile_variant_media, sizes: media_sizes, is_main_product_media: true -%}
            </div>
          {% else %}
            {%- render 'pack-media', media: selected_variant_media, mobile_media: selected_mobile_variant_media, sizes: media_sizes, is_main_product_media: true -%}
          {% endif %}
        {% endif %}
        {% capture class %}
          {{ product_media_container_class }} product-media-container--{{ media.media_type }}{% if block.settings.zoom %} product-media-container--zoomable{% endif %}{% if block.settings.aspect_ratio == 'adapt' %} product-media-container--tallest{% endif %}
        {% endcapture %}
        {% if block_settings.aspect_ratio == 'adapt' %}
          {% capture style %}
            --media-preview-ratio: {{ media.aspect_ratio | default: 1.0 }};
          {% endcapture %}
        {% endif %}

        {% if block_settings.zoom %}
          {%- capture attributes -%}on:click="#zoom-dialog-{{ block.id }}/open/0"{% if settings.transition_to_main_product %} data-view-transition-type="product-image-transition"{% endif %}{% endcapture -%}
        {% endif %}
      {% endcapture %}

      {% render 'slideshow-slide',
        index: 0,
        children: children,
        class: class,
        style: style,
        attributes: attributes,
        media_fit: block_settings.media_fit,
      %}
    {% endcapture %}

    {% if render_slideshow_arrows %}
      {% capture slideshow_arrows %}
        {% render 'slideshow-arrows', class: 'mobile:hidden', icon_style: block_settings.icons_style %}
      {% endcapture %}
    {% endif %}

    {% render 'slideshow',
      ref: 'slideshow',
      class: slideshow_class,
      slides: slides,
      slide_count: 1,
      slideshow_arrows: slideshow_arrows,
      arrows_position: icons_position
    %}

    {% if block_settings.media_presentation == 'grid' %}
      <ul
        class="media-gallery__grid list-unstyled color-{{ block_settings.color_scheme }}"
        data-testid="media-gallery-grid"
      >
        {% if selected_variant_media %}
          <li
            ref="media[]"
            class="{{ product_media_container_class }} product-media-container--{{ selected_variant_media.media_type }}"
            style="{% if block_settings.aspect_ratio == 'adapt' %} --media-preview-ratio: {{ selected_variant_media.preview_image.aspect_ratio | default: 1.0 }};{% endif %}"
            {% if settings.transition_to_main_product %}
              data-view-transition-type="product-image-transition"
            {% endif %}
          >
            {%- if block_settings.zoom and selected_variant_media.media_type == 'image' -%}
              <button
                type="button"
                class="button button-unstyled product-media-container__zoom-button"
                aria-label="{{ 'actions.zoom' | t }}"
                on:click="/zoom/0"
              >
                <span class="visually-hidden">{{ 'actions.open_image_in_full_screen' | t }}</span>
              </button>
            {%- endif -%}
            {%- liquid
                assign media_sizes = sizes_single
            -%}
            {% if block_settings.aspect_ratio != 'adapt' and block_settings.constrain_to_viewport %}
              <div class="product-media-constraint-wrapper">
                {%- render 'pack-media', media: selected_variant_media, mobile_media: selected_mobile_variant_media, sizes: media_sizes, is_main_product_media: true -%}
              </div>
            {% else %}
              {%- render 'pack-media', media: selected_variant_media, mobile_media: selected_mobile_variant_media, sizes: media_sizes, is_main_product_media: true -%}
            {% endif %}
          </li>
        {% endif %}
      </ul>
    {% endif %}
  </div>
    
  {% assign pack_limit = closest.product.selected_or_first_available_variant.metafields.custom.pack_limit | plus: 0 %}

  {% if pack_limit > 0 %}
    <div class="grid-preview-wrapper">
      <div class="grid-preview-contain">
        <div class="grid-preview-pack grid-preview-pack-{{ pack_limit }}">
          {% for i in (1..pack_limit) %}
              <div class="preview-pack-item preview-pack-{{ i }}">
                <div class="preview-pack-item--inner">

                </div>
              </div>
          {% endfor %}
        </div>
      </div>
    </div>
  {% endif %}
</media-gallery>

{% stylesheet %}
  .dialog-zoomed-gallery {
    cursor: zoom-out;
  }

  .dialog--preloading {
    opacity: 0;
  }

  .grid-preview-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2;

  }

  .grid-preview-pack {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    height: auto;
    width: 100%;
  }

  .grid-preview-contain {
    position: absolute;
    left: 0;
    width: 100%;
    padding-inline: var(--padding-4xl);

    &:has(.grid-preview-pack-1) {
      bottom: 11cqw;
    }

    &:has(.grid-preview-pack-3) {
      bottom: 15cqw;
    }

    &:has(.grid-preview-pack-6) {
      bottom: 8.5cqw;
    }
    &:has(.grid-preview-pack-12) {
      bottom: 6cqw;
    }

    @media (max-width: 750px) {
      padding-inline: var(--padding-xl);

      &:has(.grid-preview-pack-12) {
        bottom: 5cqw;
      }

      &:has(.grid-preview-pack-6) {
        bottom: 8cqw;
      }

      &:has(.grid-preview-pack-3) {
        bottom: 12cqw;
      }

      &:has(.grid-preview-pack-1) {
        bottom: 7cqw;
      }
    }
  }

  .grid-preview-pack.grid-preview-pack-1 {

    .preview-pack-item.preview-pack-1 {
      max-width: 24rem;
      position: relative;
      width: 100%;
    }

    .preview-pack-item--inner {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: auto;
    }

    @media (max-width: 750px) {

      .preview-pack-item.preview-pack-1 {
        max-width: 8rem;
      }

    }
  }

  .grid-preview-pack.grid-preview-pack-3 {
    column-gap: 1rem;

    .preview-pack-item {
      width: calc(33.33% - 1rem * 2/3);
      max-width: calc(33.33% - 1rem * 2/3);
      flex-grow: 0;

    }
  }

  .grid-preview-pack.grid-preview-pack-6 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: 1fr 1fr;
    gap: 2.5rem 1rem;

    @media (max-width: 750px) {
      gap: 0.5rem 1rem !important;
      max-width: 58cqw;
      margin-inline: auto;
    }
  }

  .grid-preview-pack.grid-preview-pack-12 {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(3,1fr);
    gap: 2rem 1rem;

    .preview-pack-5,
    .preview-pack-6,
    .preview-pack-7,
    .preview-pack-8 {
      margin-top: 2rem; /* Adds to existing 2rem gap = 4rem total */
    }

    @media (max-width: 750px) {
        gap: 0.2rem 1rem !important;
        max-width: 60cqw;
        margin-inline: auto;
    }
  }

  /* .grid-preview-pack.grid-preview-pack-6 {
    column-gap: 1rem;
    row-gap: 5rem;
    flex-wrap: wrap;

    .preview-pack-item {
      width: calc(33.33% - 1rem * 2/3);
      max-width: calc(33.33% - 1rem * 2/3);
      flex-grow: 0;

      @media (max-width: 750px) {
      }
    }
  } */

  .preview-pack-item img {
    display: block;
    max-width: 100%;
    height: auto;
    width: 100%;
  }

  .product-media__drag-zoom-wrapper {
    aspect-ratio: inherit;
    min-height: inherit;
    min-width: inherit;
    display: inherit;
    flex: inherit;
  }

  @media screen and (max-width: 749px) {
    .dialog-zoomed-gallery {
      /* Prevent scroll wheel or swipe scrolling */
      overscroll-behavior: none;
      scrollbar-width: none;
      display: flex;
      scroll-snap-type: x mandatory;
      overflow-x: hidden;
      scroll-behavior: smooth;
      height: 100%;

      &::-webkit-scrollbar {
        display: none;
      }
    }

    .dialog-zoomed-gallery .product-media-container {
      flex: 0 0 100%;
      scroll-snap-align: start;
      position: relative;
    }

    .dialog-zoomed-gallery .product-media-container--image .product-media {
      aspect-ratio: auto;
      height: 100%;
      width: 100%;
      overflow: hidden;
    }

    .dialog-zoomed-gallery .product-media-container--video,
    .dialog-zoomed-gallery .product-media-container--external_video {
      align-content: center;
    }

    .dialog-zoomed-gallery
      :is(.product-media-container--video, .product-media-container--external_video, .product-media-container--model)
      .product-media {
      aspect-ratio: auto;
      align-items: center;
      height: 100%;

      .product-media__image {
        height: 100%;
      }
    }

    .product-media__drag-zoom-wrapper {
      display: flex;
      aspect-ratio: auto;
      height: 100%;
      width: 100%;
      overflow: scroll;
      scrollbar-width: none;
      justify-content: center;

      &::-webkit-scrollbar {
        display: none;
      }
    }

    .product-media__drag-zoom-wrapper .product-media__image {
      --product-media-fit: contain;

      object-fit: var(--product-media-fit);
      overflow: hidden;
      transform: scale(var(--drag-zoom-scale))
        translate(var(--drag-zoom-translate-x, 0), var(--drag-zoom-translate-y, 0));
    }

    .media-gallery--hint {
      --slideshow-gap: var(--gap-2xs);

      :not(.dialog-zoomed-gallery) > .product-media-container:not(:only-child) {
        width: 90%;

        .product-media img {
          object-fit: cover;
        }
      }
    }
  }

  .dialog-zoomed-gallery__close-button {
    color: #fff;
    mix-blend-mode: difference;
    z-index: var(--layer-raised);
  }

  .media-gallery__mobile-controls {
    grid-area: auto;
  }

  .dialog-zoomed-gallery .product-media-container--zoomable.product-media-container--image {
    cursor: zoom-out;
  }

  .product-media-container--zoomable.product-media-container--image {
    cursor: zoom-in;
  }

  .dialog-zoomed-gallery .product-media-container--video deferred-media,
  .dialog-zoomed-gallery .product-media-container--external_video deferred-media {
    height: auto;
    aspect-ratio: var(--ratio);
  }

  .dialog-zoomed-gallery .product-media-container--model .product-media__image {
    /* Make the height match the height of the model-viewer */
    height: 100vh;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Pack media",
  "tag": null,
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "select",
      "id": "media_presentation",
      "label": "t:settings.type",
      "options": [
        {
          "value": "grid",
          "label": "t:options.grid"
        },
        {
          "value": "carousel",
          "label": "t:options.carousel"
        }
      ],
      "default": "grid",
      "info": "t:info.carousel_layout_on_mobile"
    },
    {
      "type": "header",
      "content": "t:content.grid",
      "visible_if": "{{ block.settings.media_presentation == 'grid' }}"
    },
    {
      "type": "select",
      "id": "media_columns",
      "label": "t:settings.columns",
      "options": [
        {
          "value": "one",
          "label": "t:options.one_number"
        },
        {
          "value": "two",
          "label": "t:options.two_number"
        }
      ],
      "default": "one",
      "visible_if": "{{ block.settings.media_presentation == 'grid' }}"
    },
    {
      "type": "range",
      "id": "image_gap",
      "label": "t:settings.gap",
      "min": 0,
      "max": 100,
      "unit": "px",
      "step": 1,
      "default": 0,
      "visible_if": "{{ block.settings.media_presentation == 'grid' }}"
    },
    {
      "type": "checkbox",
      "id": "large_first_image",
      "label": "t:settings.full_width_first_image",
      "default": false,
      "visible_if": "{{ block.settings.media_presentation == 'grid' and block.settings.media_columns == 'two' }}"
    },
    {
      "type": "header",
      "content": "t:content.carousel"
    },
    {
      "type": "select",
      "id": "icons_style",
      "label": "t:settings.icons",
      "options": [
        {
          "value": "arrow",
          "label": "t:options.arrows"
        },
        {
          "value": "chevron",
          "label": "t:options.chevrons"
        },
        {
          "value": "arrows_large",
          "label": "t:options.large_arrows"
        },
        {
          "value": "chevron_large",
          "label": "t:options.large_chevrons"
        }
      ],
      "default": "arrow",
      "visible_if": "{{ block.settings.media_presentation == 'carousel' }}"
    },
    {
      "type": "select",
      "id": "slideshow_controls_style",
      "label": "t:settings.pagination",
      "options": [
        {
          "value": "dots",
          "label": "t:options.dots"
        },
        {
          "value": "counter",
          "label": "t:options.counter"
        },
        {
          "value": "thumbnails",
          "label": "t:options.thumbnails"
        }
      ],
      "visible_if": "{{ block.settings.media_presentation == 'carousel' }}"
    },
    {
      "type": "select",
      "id": "slideshow_mobile_controls_style",
      "label": "t:settings.mobile_pagination",
      "options": [
        {
          "value": "dots",
          "label": "t:options.dots"
        },
        {
          "value": "counter",
          "label": "t:options.counter"
        },
        {
          "value": "hint",
          "label": "t:options.hint"
        }
      ]
    },
    {
      "type": "header",
      "content": "t:content.thumbnails",
      "visible_if": "{{ block.settings.media_presentation == 'carousel' and block.settings.slideshow_controls_style == 'thumbnails' }}"
    },
    {
      "type": "select",
      "id": "thumbnail_position",
      "label": "t:settings.position",
      "options": [
        {
          "value": "left",
          "label": "t:options.left"
        },
        {
          "value": "bottom",
          "label": "t:options.bottom"
        },
        {
          "value": "right",
          "label": "t:options.right"
        }
      ],
      "default": "bottom",
      "visible_if": "{{ block.settings.media_presentation == 'carousel' and block.settings.slideshow_controls_style == 'thumbnails' }}"
    },
    {
      "type": "range",
      "id": "thumbnail_width",
      "label": "t:settings.width",
      "min": 44,
      "max": 72,
      "step": 1,
      "unit": "px",
      "default": 64,
      "visible_if": "{{ block.settings.media_presentation == 'carousel' and block.settings.slideshow_controls_style == 'thumbnails' }}"
    },
    {
      "type": "header",
      "content": "t:content.media"
    },
    {
      "type": "select",
      "id": "aspect_ratio",
      "label": "t:settings.aspect_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:options.auto"
        },
        {
          "value": "1/1.25",
          "label": "t:options.portrait"
        },
        {
          "value": "1",
          "label": "t:options.square"
        },
        {
          "value": "2/1",
          "label": "t:options.landscape"
        }
      ],
      "default": "adapt"
    },
    {
      "type": "checkbox",
      "id": "constrain_to_viewport",
      "label": "t:settings.limit_media_to_screen_height",
      "default": false
    },
    {
      "type": "select",
      "id": "media_fit",
      "label": "t:settings.media_fit",
      "options": [
        {
          "value": "cover",
          "label": "t:options.cover"
        },
        {
          "value": "contain",
          "label": "t:options.contain"
        }
      ],
      "default": "cover",
      "visible_if": "{{ block.settings.aspect_ratio == 'adapt' and block.settings.constrain_to_viewport == true }}"
    },
    {
      "type": "range",
      "id": "media_radius",
      "label": "t:settings.border_radius",
      "min": 0,
      "max": 32,
      "step": 1,
      "unit": "px",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "extend_media",
      "label": "t:settings.extend_media_to_screen_edge",
      "default": true,
      "visible_if": "{{ section.settings.content_width == 'content-center-aligned' }}"
    },
    {
      "type": "checkbox",
      "id": "zoom",
      "label": "t:settings.enable_zoom",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "video_loop",
      "label": "t:settings.enable_video_looping",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "hide_variants",
      "default": false,
      "label": "t:settings.hide_unselected_variant_media"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-start",
      "label": "t:settings.left",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-inline-end",
      "label": "t:settings.right",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "Pack media"
    }
  ]
}
{% endschema %}
